package com.noahcharlton.robogeddon.ui.selectable;import com.noahcharlton.robogeddon.Core;import com.noahcharlton.robogeddon.block.portal.UnloaderSetMessage;import com.noahcharlton.robogeddon.block.portal.UnloaderTileEntity;import com.noahcharlton.robogeddon.ui.widget.Stack;import com.noahcharlton.robogeddon.ui.widget.Widget;import com.noahcharlton.robogeddon.world.item.Item;public class UnloaderSubMenu extends SelectableSubMenu {    private final Stack stack = new Stack();    public UnloaderSubMenu(String id) {        super(id);        Core.items.values().forEach(item -> stack.add(                new ItemButton(item).setOnClick((clickEvent, button) -> onItemClick(item))));        add(stack.pad().all(5));    }    private void onItemClick(Item item) {        var message = new UnloaderSetMessage(getTileEntity().getRootTile(), item);        client.getWorld().sendMessageToServer(message);    }    @Override    public void update() {        var tileEntity = (UnloaderTileEntity) getTileEntity();        if(tileEntity == null)            return;        for(Widget widget : stack.getChildren()){            var itemButton = (ItemButton) widget;            if(itemButton.getItem() == tileEntity.getBuffers()[0].currentItem()){                itemButton.setSelected(true);            }else{                itemButton.setSelected(false);            }        }    }}